function view_div(e,t){const s=["assign","remove","view","logs"];!s.includes(e)||"iqa"!=t&&"course"!=t||s.forEach(s=>{s!=e&&"block"==$(`#${s}_${t}_div`)[0].style.display&&($(`#${s}_${t}_div`)[0].style.display="none")})}function select_form(e,t){if(!("assign"!=e&&"remove"!=e||"iqa"!=t&&"course"!=t)){const s=$(`#${e}_${t}_div`)[0],n=$(`#${e}_${t}_error`)[0],r=$(`#${e}_${t}_success`)[0],i=$(`#${e}_${t}_au`)[0];$(`#${e}_${t}_btn`)[0].addEventListener("click",()=>{if(view_div(e,t),"block"==s.style.display)s.style.display="none";else if("none"==s.style.display){switch(t){case"iqa":i.innerHTML="<option disabled value='' selected>Choose a User</option>";break;case"course":i.innerHTML="<option disabled value='' selected>Choose a Course</option>"}n.style.display="none",r.style.display="none";const o=new XMLHttpRequest;o.open("POST",`./classes/inc/admin_${e}_render.inc.php`,!1),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(n.innerText=e.error,n.style.display="block"):e.return?i.innerHTML=e.return:(n.innerText="no data available",n.style.display="block")}else n.innerText="Loading error",n.style.display="block"},o.send(`t=${t}`),s.style.display="block"}}),$(`#${e}_${t}_form`)[0].addEventListener("submit",s=>{if(s.preventDefault(),""==i.value)n.innerText="No input provided",n.style.display="block";else{n.style.display="none",r.style.display="none";const s=new XMLHttpRequest;s.open("POST",`./classes/inc/admin_${e}.inc.php`,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){if(200==this.status){const s=JSON.parse(this.responseText);s.error?(n.innerText=s.error,n.style.display="block"):s.return?(r.innerText="Success",$(`#${e}_${t}_au option[value='${i.value}']`)[0].remove(),$(`#${e}_${t}_au option[value='']`).prop("selected",!0),r.style.display="block"):(n.innerText="Submit error",n.style.display="block")}else n.innerText="Connection error",n.style.display="block"},s.send(`id=${i.value}&t=${t}`)}})}}function view_data(e,t){if(!("view"!=e&&"logs"!=e||"iqa"!=t&&"course"!=t)){const s=$(`#${e}_${t}_div`)[0],n=$(`#${e}_${t}_error`)[0],r=$(`#${e}_${t}_content`)[0];$(`#${e}_${t}_btn`)[0].addEventListener("click",()=>{if(view_div(e,t),"block"==s.style.display)s.style.display="none";else if("none"==s.style.display){n.style.display="none",r.style.display="none";const i=new XMLHttpRequest;switch(i.open("POST",`./classes/inc/admin_${e}_render.inc.php`,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(n.innerText=e.error,n.style.display="block"):e.return?(r.innerHTML=e.return,r.style.display="block"):(n.innerText="No data available",n.style.display="block")}else n.innerText="Connection error",n.style.display="block"},e){case"logs":i.send(`sd=${$(`#${t}_startdate`)[0].value}&ed=${$(`#${t}_enddate`)[0].value}&t=${t}`);break;default:i.send(`t=${t}`)}s.style.display="block"}})}}function header_clicked(e,t,s){if(!("view"!=e&&"logs"!=e||"iqa"!=s&&"course"!=s)){const n=$(`#${e}_${s}_thead`).find("tr:first th");let r="asc";for(let e=0;e<n.length;e++)if(e===t)switch(n[e].getAttribute("sort")){case"asc":n[e].setAttribute("sort","desc"),n[e].querySelector("span").innerHTML="&darr;",r="desc";break;case"desc":case"":n[e].setAttribute("sort","asc"),n[e].querySelector("span").innerHTML="&uarr;"}else n[e].setAttribute("sort",""),n[e].querySelector("span").innerHTML="";const i=$(`#${e}_${s}_tbody`).find("tr");if(i.length>1){let n=[];switch(i.each(function(e,s){const r=$(s).find("td");let i=[];r.each(function(e,t){!0===/[0-9]/.test(t.innerText)&&!0===t.innerText.includes("/")&&!1===/[a-zA-Z]/.test(t.innerText)?(tmpString=t.innerText.split("/"),i.push([t.getAttribute("dtval"),"date"])):t.querySelector("a")?i.push([t.innerText,t.querySelector("a").getAttribute("href")]):i.push([t.innerText,null])});const o=i[0];i[0]=i[t],i[t]=o,n.push(i)}),r){case"asc":!0===/[0-9]/.test(n[0][0])&&!1===/[a-zA-Z]/.test(n[0][0])?n.sort(function(e,t){return parseFloat(e[0])-parseFloat(t[0])}):n.sort(function(e,t){const s=e[0][0],n=t[0][0];return s<n?-1:n<s?1:0});break;case"desc":n.reverse()}let o=[];n.forEach(function(e){const s=e[t];e[t]=e[0],e[0]=s,o.push(e)});const a=$(`#${e}_${s}_tbody`)[0];a.innerHTML="",o.forEach(function(e){let t="<tr>";for(let s=0;s<e.length;s++)switch(e[s][1]){case"date":const n=e[s][0];e[s][0]=new Date(1e3*e[s][0]),t+=`<td dtval='${n}'>${String(e[s][0].getDate()).padStart(2,"0")}/${String(e[s][0].getMonth()+1).padStart(2,"0")}/${e[s][0].getFullYear()} ${String(e[s][0].getHours()).padStart(2,"0")}:${String(e[s][0].getMinutes()).padStart(2,"0")}:${String(e[s][0].getSeconds()).padStart(2,"0")}</td>`;break;case null:t+=`<td>${e[s][0]}</td>`;break;default:t+=`<td><a href='window.location.href=${e[s][1]}'>${e[s][0]}</a></td>`}t+="</tr>",a.innerHTML+=t})}}}select_form("assign","iqa"),select_form("remove","iqa"),select_form("assign","course"),select_form("remove","course"),view_data("view","iqa"),view_data("logs","iqa"),view_data("view","course"),view_data("logs","course"),["iqa","course"].forEach(function(e){$(`#logs_${e}_filter_form`)[0].addEventListener("submit",t=>{t.preventDefault();const s=$(`#logs_${e}_error`)[0],n=$(`#logs_${e}_content`)[0];n.style.display="none",s.style.display="none";const r=new XMLHttpRequest;r.open("POST","./classes/inc/admin_logs_render.inc.php",!1),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(s.innerText=e.error,s.style.display="block"):e.return?(n.innerHTML=e.return,n.style.display="block"):(s.innerText="No data available",s.style.display="block")}else s.innerText="Connection error",s.style.display="block"},r.send(`sd=${$(`#${e}_startdate`)[0].value}&ed=${$(`#${e}_enddate`)[0].value}&t=${e}`)})});